---
title: "Depositing research data into repositories"

author: 
  - name: Daniel Manrique-Castano, Ph.D
    email: daniel.manrique-castano@alliancecan.ca
    affiliations:
      - name: Digital Research Alliance of Canada

date: last-modified
date-format: full

format: 
  html:
    embed-resources: true
    mermaid:
      theme: forest
      
  revealjs:
    footer: "Depositing data - Daniel Manrique-Castano, Ph.D"
    logo: "images/alliance_logo.png"
    theme: white
    transition: fade
    slide-number: true
    show-slide-number: all
    preview-links: auto
    mermaid:
      theme: forest
      mermaid-format: svg
    
filters:
  - reveal-auto-agenda
auto-agenda:
  bullets: numbered
  heading: Agenda
  
  gfm:
    mermaid-format: svg

css: styles.css
bibliography: references.bib 
editor: source
---

# Why do we care about sharing data?

## Why we share and resuse data?{.center} 

::: {style="text-align: left;font-size: 80%"}

Some reasons to share research data are:

-   **Avoid unnecessary or costly experiments** by using previous research results.

-   **Validate research findings:** [Independent verification]{style="color:green;"} of scientific results and conclusions (by replicating research workflows).

-   **Repurpose data:** Use the data for [new research questions]{style="color:green;"} or in combination with other datasets. They are also extremely valuable as [educational resources]{style="color:green;"}.

-   **Build upon previous work:** to [accelerate scientific discovery]{style="color:green;"} and meta-analysis by avoiding duplication of efforts or reliance on [irreproducible research]{style="color:red;"}. 
:::

## Tri-Agency Research Data Management Policy{.center} 

The [Goverment of Canada](https://science.gc.ca/site/science/en/interagency-research-funding/policies-and-guidelines/research-data-management) promotes RDM in its [Tri-Agency Research Data Management Policy](https://science.gc.ca/site/science/en/interagency-research-funding/policies-and-guidelines/research-data-management/tri-agency-research-data-management-policy-frequently-asked-questions).

Through its federal funding agencies, the  the Government of Canada seeks to implement [data management plans (DMPs)]{style="text-decoration: underline;"} and [sharing]{style="text-decoration: underline;"} of research data to maximize the benefits to society. 


## {{< bi share-fill >}} Sharing data is a professional responsability{.center}

Depositing a dataset in a repository is [NOT ONLY]{style="color:red;"} an exercise in meeting the requirements of funding agencies and journals. It is an [ethical and professional responsibility]{style="color:green;"} of researchers to ensure reproducible science, and the access and reuse of scientific data.

## Therefore, research needs to move towards{.center} 

- [Competent]{style="color:green;"} researchers in [RDM]{style="text-decoration: underline;"} and data analysis.
- [Standardized approaches]{style="color:green;"} to [sharing]{style="text-decoration: underline;"} raw data and analysis code to support research findings.
- Researchers with a [commitment to transparency]{style="color:green;"} and best scientific practice practices to ensure [research integrity]{style="text-decoration: underline;"}.


## Benefits for different stakeholders

### {{< bi people-fill >}} For researchers:

```{mermaid}
%%| fig-width: 10
%%| fig-height: 9

flowchart LR
  A[Efficiency] --> B[Collaborative work] --> C[Reproducibility/impact]
```

### {{< bi x-diamond-fill >}} For publishers:

```{mermaid}
%%| fig-width: 10
%%| fig-height: 9

flowchart LR
  A[Rigorous peer review] --> B[Validation and reproducibility] --> C[Open Science]
```

### {{< bi signpost >}} For funders:

```{mermaid}
%%| fig-width: 10
%%| fig-height: 9

flowchart LR
  A[Transparency] --> B[Accountability] --> C[Return on Investment]
```

# Current issues with data 

## Data could be in many places{.center} 

::::: {layout-ncol="4"}
:::: {#first-column}
::: {style="text-align: center;font-size: 60%"}
![Laptop of students and postdocs](images/Laptop.jpg){fig-align="center" width="100%"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 60%"}
![Institute network](images/Network.jpg){fig-align="center" width="100%"}
:::
::::

:::: {#third-column}
::: {style="text-align: center;font-size: 60%"}
![The cloud (Google drive)](images/Cloud.jpg){fig-align="center" width="100%"}
:::
::::

:::: {#forth-column}
::: {style="text-align: center;font-size: 60%"}

![HPC cluster](images/HighCompuating.jpg){fig-align="center" width="100%"}
:::
::::
:::::

## Data is not shared{.center}

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: left; font-size: 70%"}
**Data availability statement**

"The raw data supporting the conclusions of this article will be made available by the authors, without undue reservation."
:::
::::

:::: {#second-column}
::: {style="text-align: center; font-size: 70%"}
![Researchers do not share data](images/NoData.png){fig-align="center" width="600" height="100"}

::::
:::::
::::::

## Common issues in data repositories{.center} 

When shared, more often than not we observed the the data:

{{< bi file-earmark-text-fill >}} Lacks comprehensive [metadata and readme file(s)]{style="color:red;"} explaining the [context, methodology, and structure of the dataset]{style="text-decoration: underline;"}.

{{< bi file-earmark-break-fill >}} Presents a [disorganized]{style="color:red;"} structure that makes its reuse impossible.

{{< bi file-earmark-medical-fill >}} Is treated only as a [supplement]{style="color:red;"} of research articles.


# Principles of sharing data

## Ensure your data is a valuable, standalone resource{.center}

The following are essential aspects researchers must consider when sharing data:

{{< bi archive-fill >}} Your dataset should be a [standalone resource]{style="color:green;"}.

{{< bi binoculars-fill >}} Your dataset should be [discoverable]{style="color:green;"} and [understandable]{style="color:green;"}.

{{< bi person-fill >}} Your dataset must be [reusable]{style="color:green;"} by the community.

::: {.callout-caution collapse="true"}
## Datasets as standalone objects

Regardless of whether the dataset is linked to a scientific publication, it must be [understandable]{style="color:green;"} and [independently navigable.]{style="color:green;"}
:::

## FAIR principles {.smaller}

:::: {layout-ncol="2"}
::: {#first-column}
{{< bi search >}} [Findable]{style="color:green;"}

-   {{< bi person >}} Persistent identifiers\
-   {{< bi file-earmark-pdf-fill >}} Rich metadata
-   {{< bi database-fill >}} Indexed in a searchable resource

{{< bi hdd-fill >}} [Accessible]{style="color:green;"}

-   {{< bi file-earmark-pdf-fill >}} Open file formats\
-   {{< bi cpu-fill >}} Software requirements
:::

::: {#second-column}
{{< bi diagram-2-fill >}} [Interoperable]{style="color:green;"}

-   {{< bi globe >}} Formal, standardized, common language
-   {{< bi front >}} Reference to other (meta)data

{{< bi recycle >}} [Reusable]{style="color:green;"}

-   {{< bi geo-alt-fill >}} Appropriate context and detailed provenance
-   {{< bi file-earmark-font-fill >}} Accurate/descriptive attributes
-   {{< bi receipt >}} Clear licence and usage rights
:::
::::

# General guidelines for dataset deposits

## {{< bi text-center >}} General guidelines for data sharing{.center}

1.  {{< bi diagram-2-fill >}} Define a dataset [schema/road]{style="color:green;"}
2.  {{< bi file-earmark-pdf-fill >}} Write a [readme]{style="color:green;"}/metadata file
3.  {{< bi folder-fill >}} Organize [data]{style="color:green;"} folders and scripts/[codes]{style="color:green;"} folders

## 1. Define a dataset schema/road

At the [beginning]{style="color:green;"} (optimal) or [during]{style="color:green;"} (not bad) your research, define an organized scheme for your data.

::: callout-tip
## Think about

-   {{< bi folder-fill >}} Folders/[directory structures]{style="color:green;"}
-   {{< bi filetype-tiff >}} Think about [file types/formats]{style="color:green;"}
-   {{< bi file-earmark-font-fill >}} Establish logical/descriptive [naming conventions]{style="color:green;"}
:::

Overall, ensure that the schema is [logical and consistent]{style="color:green;"}. An external user must be able to understand the directory structure.

## 2. The guiding light of a dataset: the README

The (main) {{< bi file-earmark-medical-fill>}} [readme]{style="color:green;"} file is a guide to [understanding the dataset]{style="color:green;"} and enabling its reuse or execution.

::::: {layout-ncol="2"}
:::: {#first-column}
::: {style="text-align: center; font-size: 50%"}
![From https://github.com/twbs/bootstrap-rubygem](images/readme.webp){fig-align="center" width="500" height="300"}
:::
::::

:::: {#second-column}
::: {style="font-size: 80%;"}
FRDR users can use our \[text\] or \[web\] template to generate a [readme file]{style="color:green;"} for submission to FRDR.

Additional resources are:\
- [Creating a README file](https://blog.datadryad.org/2023/10/18/for-authors-creating-a-readme-for-rapid-data-publication/)\
- [Readme.so](https://readme.so/)\
- [Readme.ai](https://readme-ai.streamlit.app/)
:::
::::
:::::

## Contents of a readme file

::: r-fit-text
In general, a dataset readme file shows:

-   {{< bi database-fill >}} A [dataset identifier]{style="color:green;"} showing aspects such as title, authors, date of collection, and geographical information.
-   {{< bi folder-fill >}} A [map of files/folders]{style="color:green;"} defining the hierarchy of folders and subfolders and their contents. The user can also define explicit naming conventions.
-   {{< bi gear-fill >}} The [methodological information]{style="color:green;"} presents the methods for data collection/generation, analysis, and experimental conditions.

::: {.callout-caution collapse="true"}
## To refresh your memory

The dataset is a separate object (from the research article). Methods and tools for data collection [MUST NOT]{style="color:red;"} be relegated to the research article.
:::

-   {{< bi sd-card-fill >}} A set of [instructions and software]{style="color:green;"} for opening, handling and reproducing research pipelines.

-   {{< bi credit-card-2-front-fill >}} [Sharing and access information]{style="color:green;"} detailing permissions and terms of use.
:::

## 3. Organize dataset folders

And [organized scheme]{style="color:green;"} is the {{< bi key-fill >}} key to understanding data structure.

::::: {layout-ncol="2"}
:::: {#first-column}
::: {style="text-align: center;font-size: 50%"}
![From pexels.com](images/Matryoska.jpeg)
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![File structure](images/files.png){width="75%"}
:::
::::
:::::

## {{< bi diagram-2-fill >}} Diving into the folder tree {.center}

::::: {layout-ncol="2"}
:::: {#first-column}

::: callout-tip
{{< bi diagram-3-fill >}} Plan/define [directory structures, file formats, and naming conventions]{style="text-decoration: underline;"}.
:::

For example, [TIER 4.0](https://www.projecttier.org/tier-protocol/protocol-4-0/root/) is [systemic template]{style="color:green;"} to standardize and increase transparency/reproducibility of research data. The user can [download](https://github.com/daniel-manrique/RDM_Training/blob/main/templates/TIER4.0_DatasetTemplate.zip) a folder structure and adapt it to specific cases.

::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Folder tree](images/tier.png){width="45%"}
:::
::::
:::::

## {{< bi diagram-3-fill >}} Organizing a data folder {.center}

The [data]{style="color:green;"} {{< bi folder-fill >}} must be organized [logically and hierarchically]{style="color:green;"} according to the characteristics of each dataset.

## {{< bi folder-fill >}} Input data

Sharing the [input/raw data]{style="color:green;"} is a research integrity and data management best practice. The [Data_Input/]{style="color:orange;"} {{< bi folder-fill >}} can contain:

::::: {layout-ncol="2"}
:::: {#first-column}

### a) [Data files]{style="color:magenta;"} (stored in subfolders if necessary)

-   Original [images]{style="color:green;"} (.tiff, .czi)
-   Measuring device [output files]{style="color:green;"} (.txt, .csv)
-   Original registration [datasheets]{style="color:green;"} (.png, .csv, .xlxs)
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Folder tree](images/data_raw.png){width="90%"}
:::
::::
:::::

##

### b) A [metadata]{style="color:magenta;"} file/folder {{< bi folder-fill >}}

This [Metadata/]{style="color:orange;"} {{< bi folder-fill >}} contains information about the listed data files to ensure understanding and usability. It may list:

-   [Guide to data sources:]{style="color:green;"} It describes how the data were [generated]{style="text-decoration: underline;"} or their [provenance]{style="text-decoration: underline;"}. This may include [methodological details]{style="text-decoration: underline;"}. and [technical metadata]{style="text-decoration: underline;"}..
-   [Codebooks / data dictionaries:]{style="color:green;"} Explain the [contents of files]{style="text-decoration: underline;"}. (mainly .csv tables). They can be [.txt](https://osf.io/9n3gh) or [.csv-xlxs](https://osf.io/925sh) files.

The aim of these resources is to [support the reuse]{style="color:green;"} of the data by providing a faithful and [sufficient description]{style="color:green;"} of the variables.

## {{< bi folder-fill >}} Analysis data {.center}

A [Data_Analysis/]{style="color:orange;"} {{< bi folder-fill >}} contains the [processed files]{style="color:green;"}, those used to generate the research results.

::::: {layout-ncol="2"}
:::: {#first-column}

Like the input data, this files contain a [codebook/data dictionary]{style="color:green;"}. Also, these files can be accompanied by a [Data_Appendix]{style="color:green;"} files that showcase basic descriptive statistics or show data distributions.

::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Folder tree](images/data_processed.png){width="90%"}
:::
::::
:::::

## {{< bi folder-fill >}} Intermediate data (Optional) {.center}

A [Data_Intermediate/]{style="color:orange;"} {{< bi folder-fill >}} can contain intermediate processed data, or pre-processed files as part of an analysis pipeline. For example, image 'masks' and machine learning classifiers that are used to further process images.

## {{< bi code-square >}} Scripting is the way {.smaller}

Although most scientists may be more comfortable with GUIs, the current research landscape requires the use of scripts and (analysis) code to ensure the reproducibility of research results.

::: callout-tip
{{< bi code-square >}} Coding should be considered an [essential skill]{style="color:green;"}, as well as other methods such as animal surgery, patch clamp, or flow cytometry).
:::

![](images/theway.png){fig-align="center"}

## {{< bi folder-fill >}} Processing scripts

::: r-fit-text
::: {.callout-caution collapse="true"}
The data you get from your measurements may not be formatted and organized in a way that allows you to analyse it and generate results.
:::

A [Scripts_Processing]{style="color:orange;"} {{< bi folder-fill >}} may contain scripts/code that prepare (or transform) the raw data (images, tables) for analysis [Data_Analysis/]{style="color:orange;"} {{< bi folder-fill >}}.

[Examples of workflows:]{style="text-decoration: underline;"}

-   Drop variables (subset the dataset)
-   Generate new variables (Perform computations, calculate averages, etc.)
-   Combine different sources of information (merge tables or files)

::: callout-tip
Yo may want to consider saving the generated intermediatw files in the [Data_Intermediate/]{style="color:orange;"} {{< bi folder-fill >}}.
:::
:::

## {{< bi lightbulb-fill >}} Keep in mind {.center}

You will cereate several processing scripts. [Logical naming conventions]{style="color:green;"} are the key to linking the input/output data to the processing scripts.

## {{< bi folder-fill >}} Analysis scripts {.smaller}

::::: {layout-ncol="2"}
:::: {#first-column}

The [Scripts_Analisys]{style="color:orange;"} {{< bi folder-fill >}} folder host scripts/code to generate results that may be in the form of:

-   {{< bi card-image >}} Images
-   {{< bi file-bar-graph-fill >}} Figures
-   {{< bi table >}} Tables
-   {{< bi calculator-fill >}} Statistical models

::::

:::: {#Second-column}
::: {style="text-align: center;font-size: 50%"}
![Folder tree](images/scripts_processing.png){width="90%"}
:::
::::
:::::

::: callout-tip
In general, these scripts import and process the [analysis data]{style="color:orange;"}.
:::

## {{< bi code-slash >}} A master script? {.center}

The [Scripts/]{style="color:orange;"} {{< bi folder-fill >}} can also contain a [master script]{style="color:green;"} that executes all other scripts, creating a fully automated pipeline.

## {{< bi folder-fill >}} The output folder

::::: {layout-ncol="2"}
:::: {#first-column}

The [Output/]{style="color:orange;"} {{< bi folder-fill >}} contains subfolders storing the files generated by the analysis scripts in the form of:

-   {{< bi card-image >}} Images
-   {{< bi file-bar-graph-fill >}} Figures
-   {{< bi table >}} Tables
-   {{< bi calculator-fill >}} Statistical models
::::

:::: {#Second-column}
::: {style="text-align: center;font-size: 50%"}
![Folder tree](images/output.png){width="100%"}
:::
::::
:::::

## {{< bi lightbulb-fill >}} Commitment to reproducibility {.center}

Sharing the output resulting from computations/code is one of the best better commitments to [open and reproducible science]{style="color:green;"}. It is also a way to preserve material for future use in an organized way.

# Data submission checklist

## {{< bi card-checklist >}} Submitting your data to a repository {.smaller}

When yo submit your data to a repository (FRDR), make sure its meets these characteristics:

1.  {{< bi diagram-2-fill >}} [Your folders and files are organized in a clear and structured way]{style="color:green;"} (understandable to the community): Use [standardized file formats]{style="color:green;"} (e.g., CSV, TIFF) and check for consistency in [naming conventions]{style="color:green;"}.

2.  {{< bi file-earmark-text-fill >}} [The metadata/readme is as complete as possible]{style="color:green;"} and allow  to be understood as a standalone object, providing data [collection methods, processing steps, and relevant context]{style="text-decoration: underline;"}.

3.  {{< bi file-person-fill >}} [Verify independent usability]{style="color:green;"}: Data must be [complete and understandable]{style="text-decoration: underline;"} (include any necessary instructions for data interpretation) without the need for the accompanying research article.

## In summary {.center}

Be aware that the dataset is a research object that [serves the public and the scientific community]{style="color:green;"}, and that can be used (and cited) [independently]{style="color:green;"} of the research article.

[Better yet, think of articles as supplements to your dataset!!!]{style="color:green;"}



# The Federated Research Data Repository (FRDR)

## Understanding FRDR

::: r-fit-text
The Federated Research Data Repository (FRDR) is a national platform for Canadian researchers to discover, store, and share research data.

**Our goals**:

-   {{< bi bookmark-check-fill >}} Improve data [discoverability]{style="color:green;"} (in partnership with [Lunaris](https://www.lunaris.ca/)).
-   {{< bi bookmark-check-fill >}} Promote [open science practices]{style="color:green;"} and the [reuse]{style="color:green;"} of research data.
-   {{< bi bookmark-check-fill >}} Ensure the [long-term preservation]{style="color:green;"} of valuable research data.
:::

::: callout-tip
## FRDR is for canadian researchers

FRDR supports a [wide range of disciplines]{style="color:green;"} and data types, providing a robust infrastructure for [management and dissemination]{style="color:green;"} of research data across Canada.
:::

## Benefits of using FRDR

::: r-fit-text
-   {{< bi bookmark-plus-fill >}} FRDR ensures the [long-term preservation]{style="color:green;"}, [accessibility]{style="color:green;"} and [usability]{style="color:green;"} of datasets through its curation and preservation team.

-   {{< bi bookmark-plus-fill >}} FRDR supports funding [agencies](https://science.gc.ca/site/science/en/interagency-research-funding/policies-and-guidelines/research-data-management/tri-agency-research-data-management-policy-frequently-asked-questions) requirements related to open access to data (and [research data management plans](https://dmp-pgd.ca/)).

-   {{< bi bookmark-plus-fill >}} Promotes [dataset visibility]{style="color:green;"} and [reuse]{style="color:green;"} across a wide range of disciplines.

-   {{< bi bookmark-plus-fill >}} FRDR supports [large datasets]{style="color:green;"}, making it an ideal repository for data-intensive research.

-   {{< bi bookmark-plus-fill >}} FRDR supports researchers in [data management best practices]{style="color:green;"}.
:::

::: callout-tip
## FRDR supports researchers and institutions

FRDR has competent staff to guide researchers and institutions to ensure that datasets are valuable and comply with [FAIR](https://www.go-fair.org/fair-principles/) principles.
:::

## {{< bi database-fill >}} Datasets as standalone, reusable objects

At FRDR, we aim for datasets to be [standalone objects]{style="color:green;"} (independent of research articles) with potential [social, research or educational uses]{style="text-decoration: underline;"}.

::: {style="text-align: center;font-size: 50%"}
![Image by https://biosistemika.com/](images/FAIR_Principles.png){fig-align="center" width="600" height="300"}
:::


------------------------------------------------------------------------

## Resources and support {.smaller}

### Supporting material

-   https://www.frdr-dfdr.ca/docs/en/depositing_data/
-   [Training resources](https://alliancecan.ca/en/services/research-data-management/learning-and-training/training-resources) from the Alliance 

### Support Services:

Contact us to ensure that your data is well prepared and can be effectively shared with the research community.

-   Email: rdm-gdr\@alliancecan.ca
-   https://www.frdr-dfdr.ca/repo/